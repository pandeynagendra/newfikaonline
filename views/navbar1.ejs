<!DOCTYPE html>
<html lang="en" data-bs-theme="light" data-pwa="true">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Google tag -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-42QLWK8ESK"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-42QLWK8ESK');

    (function () {
  const html = document.documentElement;
  const toggleBtn = document.getElementById("themeToggleBtn");
  const toggleIcon = document.getElementById("themeToggleIcon");

  if (!toggleBtn || !toggleIcon) return;

  // Load saved theme OR system preference
  const savedTheme = localStorage.getItem("theme");
  const systemPrefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
  const initialTheme = savedTheme || (systemPrefersDark ? "dark" : "light");

  applyTheme(initialTheme);

  toggleBtn.addEventListener("click", () => {
    const current = html.getAttribute("data-bs-theme");
    const next = current === "dark" ? "light" : "dark";
    applyTheme(next);
    localStorage.setItem("theme", next);
  });

  function applyTheme(theme) {
    html.setAttribute("data-bs-theme", theme);
    toggleIcon.className =
      theme === "dark"
        ? "ci-sun icon-size-lg"
        : "ci-moon icon-size-lg";
  }
})();


document.addEventListener("DOMContentLoaded", function () {
  const html = document.documentElement;
  const toggleBtn = document.getElementById("themeToggleBtn");
  const toggleIcon = document.getElementById("themeToggleIcon");

  if (!toggleBtn || !toggleIcon) return;

  const savedTheme = localStorage.getItem("theme");
  const systemPrefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
  const initialTheme = savedTheme || (systemPrefersDark ? "dark" : "light");

  applyTheme(initialTheme);

  toggleBtn.addEventListener("click", () => {
    const next =
      html.getAttribute("data-bs-theme") === "dark" ? "light" : "dark";
    applyTheme(next);
    localStorage.setItem("theme", next);
  });

  function applyTheme(theme) {
    html.setAttribute("data-bs-theme", theme);
    toggleIcon.className =
      theme === "dark"
        ? "ci-sun icon-size-lg"
        : "ci-moon icon-size-lg";
  }
});
</script>


  <!-- SEO -->
  <meta name="keywords" content="FikA, trolley speakers, Bluetooth speakers, soundbars, wireless speakers, portable speakers, home audio, best speakers, high-quality audio, speaker system, electronic gadgets">
  <meta name="author" content="Fika">

  <!-- Favicon -->
  <link rel="icon" href="/images/logo.png" sizes="32x32">
  <link rel="manifest" href="manifest.json">

  <!-- Theme -->
  <script src="/theme/assets/js/theme-switcher.js"></script>
  <link rel="stylesheet" href="/theme/assets/icons/cartzilla-icons.min.css">
  <link rel="stylesheet" href="/theme/assets/vendor/swiper/swiper-bundle.min.css">
  <link rel="stylesheet" href="/theme/assets/vendor/simplebar/simplebar.min.css">
  <link rel="stylesheet" href="/theme/assets/css/theme.min.css">

  <script src="/theme/assets/js/customizer.min.js"></script>
  
  <style>
    /* Custom height control */
    .compact-header {
      min-height: 60px !important;
    }
    
    .compact-logo {
      height: 80px !important;
      width: auto !important;
      object-fit: contain;
    }
/* ===== GLOBAL DARK / LIGHT MODE FIX ===== */
html, body {
  transition: background-color .25s ease, color .25s ease;
}

header.navbar {
  background-color: var(--bs-body-bg) !important;
  color: var(--bs-body-color);
}

.search-input-fixed,
.compact-search {
  background-color: var(--bs-tertiary-bg) !important;
  color: var(--bs-body-color) !important;
  border: 1px solid var(--bs-border-color) !important;
}

.search-input-fixed::placeholder,
.compact-search::placeholder {
  color: var(--bs-secondary-color);
}

.compact-btn {
  background-color: transparent !important;
  color: var(--bs-body-color) !important;
  border-color: var(--bs-border-color) !important;
}

.compact-btn:hover {
  background-color: var(--bs-tertiary-bg) !important;
}

.offcanvas,
.modal-content,
.list-group-item,
.form-control,
.form-select {
  background-color: var(--bs-body-bg);
  color: var(--bs-body-color);
}

    /* Centered Search Bar */
    .search-center-container {
      display: flex;
      justify-content: center;
      width: 100%;
    }
    
    .search-input-fixed {
      height: 38px !important;
      font-size: 14px !important;
      padding-left: 3.5rem !important;
      padding-right: 1rem !important;
      background-color: #f8f9fa !important;
      border: 1px solid #dee2e6 !important;
      width: 100%;
      max-width: 400px;
      transition: all 0.3s ease;
    }
    
    .search-input-fixed:focus {
      box-shadow: 0 0 0 3px rgba(13, 110, 253, 0.1) !important;
      border-color: #86b7fe !important;
      background-color: #fff !important;
    }
    
    /* Improved Icon Buttons */
    .compact-btn {
      width: 44px !important;
      height: 44px !important;
      padding: 0 !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      border-radius: 10px !important;
      transition: all 0.3s ease;
      border: 1px solid #dee2e6 !important;
    }
    
    .compact-btn:hover {
      background-color: #f8f9fa !important;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    
    .btn-dark.compact-btn:hover {
      background-color: #212529 !important;
    }
    
    .compact-badge {
      font-size: 10px !important;
      padding: 3px 5px !important;
      min-width: 18px !important;
      height: 18px !important;
      z-index: 1;
    }
    
    .compact-search {
      height: 38px !important;
      font-size: 14px !important;
    }
    
    .compact-nav-toggler {
      padding: 4px 8px !important;
    }
    
    /* Larger icons */
    .icon-size-lg {
      font-size: 22px !important;
    }
    
    /* Improved layout spacing */
    .icons-container {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    /* Truncate text for product descriptions */
    .truncate-text {
      max-height: 6em;
      line-height: 1.5em;
      overflow: hidden;
      text-overflow: ellipsis;
      word-wrap: break-word;
    }
    
    /* Responsive adjustments */
    @media (max-width: 1199px) {
      .search-input-fixed {
        max-width: 350px;
      }
    }
    
    @media (max-width: 991px) {
      .compact-logo {
        height: 70px !important;
      }
      /* ================= DARK / LIGHT MODE ================= */
html, body {
  transition: background-color .25s ease, color .25s ease;
}

header.navbar {
  background-color: var(--bs-body-bg) !important;
  color: var(--bs-body-color);
}

.search-input-fixed,
.compact-search {
  background-color: var(--bs-tertiary-bg) !important;
  color: var(--bs-body-color) !important;
  border: 1px solid var(--bs-border-color) !important;
}

.search-input-fixed::placeholder,
.compact-search::placeholder {
  color: var(--bs-secondary-color);
}

.compact-btn {
  background-color: transparent !important;
  color: var(--bs-body-color) !important;
  border-color: var(--bs-border-color) !important;
}

.compact-btn:hover {
  background-color: var(--bs-tertiary-bg) !important;
}

.offcanvas,
.modal-content,
.list-group-item,
.form-control,
.form-select {
  background-color: var(--bs-body-bg);
  color: var(--bs-body-color);
}

/* ===== CATEGORY GRID DROPDOWN ===== */

.category-grid-dropdown {
  width: 520px;
  padding: 18px;
  border: none;
}

/* Grid layout */
.category-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 14px;
}

/* Individual card */
.category-card {
  text-decoration: none;
  background: #fff;
  border-radius: 14px;
  padding: 14px 10px;
  text-align: center;
  transition: all 0.25s ease;
  border: 1px solid #f1f1f1;
}

/* Hover effect */
.category-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 12px 24px rgba(0,0,0,0.08);
  border-color: #e5e5e5;
}

/* Icon container */
.category-icon {
  width: 56px;
  height: 56px;
  margin: 0 auto 8px;
  border-radius: 50%;
  background: #f8f9fa;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Icon image */
.category-icon img {
  width: 32px;
  height: 32px;
  object-fit: contain;
}

/* Category text */
.category-name {
  font-size: 13px;
  font-weight: 600;
  color: #333;
  line-height: 1.2;
}

/* Responsive */
@media (max-width: 992px) {
  .category-grid-dropdown {
    width: 100%;
  }
  .category-grid {
    grid-template-columns: repeat(3, 1fr);
  }
}

      
      .icons-container {
        gap: 10px;
      }
      
      .compact-btn {
        width: 40px !important;
        height: 40px !important;
      }
      
      .icon-size-lg {
        font-size: 20px !important;
      }
    }
    
    @media (max-width: 767px) {
      .compact-btn {
        width: 36px !important;
        height: 36px !important;
      }
      
      .icon-size-lg {
        font-size: 18px !important;
      }
    }
  </style>
</head>

<body>

<!-- CART -->
<%- include('./shoppingCart.ejs') %>

<!-- ================= COMPACT HEADER ================= -->
<header class="navbar navbar-expand-lg navbar-light bg-white border-bottom sticky-top compact-header p-0">
  <div class="container py-1">
    <div class="row align-items-center w-100 g-2">

      <!-- LOGO + TOGGLER -->
      <div class="col-lg-3 d-flex align-items-center">
        <button class="navbar-toggler compact-nav-toggler me-2" data-bs-toggle="offcanvas" data-bs-target="#navbarNav">
          <span class="navbar-toggler-icon" style="font-size: 1.5rem;"></span>
        </button>

        <a href="/" class="navbar-brand p-0">
          <img src="/images/L3.png" class="compact-logo" alt="Fika Logo">
        </a>
      </div>

      <!-- CENTERED SEARCH BAR -->
      <div class="col-lg-6 d-flex align-items-center justify-content-center py-2">
  <div class="search-center-container d-flex align-items-center gap-3">

    <!-- ================= CATEGORY DROPDOWN ================= -->
    <div class="dropdown d-none d-lg-block">
      <button class="btn btn-outline-secondary rounded-pill px-3 d-flex align-items-center"
              data-bs-toggle="dropdown"
              data-bs-trigger="hover">
        <i class="ci-grid me-2"></i>
        <span>Categories</span>
        <i class="ci-chevron-down ms-2 fs-sm"></i>
      </button>

      <!-- CATEGORY LIST (OLD CODE LOGIC) -->
    <ul class="dropdown-menu category-grid-dropdown shadow rounded-4 mt-2">
  <div class="category-grid">

    <% for (let i = 0; i < result[0].length; i++) { %>
      <a href="/category?id=<%= result[0][i].id %>" class="category-card">
        <div class="category-icon">
          <img src="/images/<%= result[0][i].image %>" alt="<%= result[0][i].name %>">
        </div>
        <span class="category-name"><%= result[0][i].name %></span>
      </a>
    <% } %>

  </div>
</ul>
    </div>

    <!-- ================= SEARCH BAR ================= -->
    <div style="width:100%; max-width:400px;">
      <form id="searchFormDesktop"
            action="/search"
            method="GET"
            class="position-relative">
        <i class="ci-search position-absolute top-50 translate-middle-y"
           style="left:16px;color:#6c757d;font-size:16px;z-index:10;"></i>

        <input type="search"
               name="q"
               class="form-control rounded-pill w-100 search-input-fixed ps-5"
               placeholder="Search products..."
               aria-label="Search products">
      </form>
    </div>

  </div>
</div>


      <!-- ICONS -->
      <div class="col-lg-3 d-flex align-items-center justify-content-end py-2">
        <div class="icons-container">
          
          <!-- THEME TOGGLE -->
<button class="btn btn-sm btn-outline-secondary compact-btn"
        id="themeToggleBtn"
        title="Toggle Dark / Light Mode"
        aria-label="Toggle theme">
  <i class="ci-moon icon-size-lg" id="themeToggleIcon"></i>
</button>

          <!-- ACCOUNT -->
          <% if (login) { %>
            <a href="/myaccount" class="btn btn-sm btn-outline-secondary compact-btn" title="My Account" aria-label="My Account">
              <i class="ci-user icon-size-lg"></i>
            </a>
          <% } else { %>
            <a href="/login" class="btn btn-sm btn-outline-secondary compact-btn" title="Login" aria-label="Login">
              <i class="ci-user icon-size-lg"></i>
            </a>
          <% } %>

          <!-- WISHLIST -->
          <a href="/view-wishlist" class="btn btn-sm btn-outline-secondary compact-btn d-none d-md-inline-flex" title="Wishlist" aria-label="Wishlist">
            <i class="ci-heart icon-size-lg"></i>
          </a>

          <!-- CART -->
          <button class="btn btn-sm btn-dark compact-btn position-relative"
            data-bs-toggle="offcanvas"
            data-bs-target="#shoppingCart"
            title="Shopping Cart"
            aria-label="Shopping Cart">
            <i class="ci-shopping-cart icon-size-lg"></i>
            <% if (cartData.cartItems.length > 0) { %>
              <span class="badge bg-danger compact-badge position-absolute top-0 start-100 translate-middle border border-2 border-white">
                <%= cartData.cartItems.length %>
              </span>
            <% } %>
          </button>
          
        </div>
      </div>
    </div>
  </div>

  <!-- MOBILE SEARCH -->
  <div class="collapse d-lg-none border-top" id="searchBarMobile">
    <div class="container py-2">
      <form id="searchFormMobile" action="/search" method="GET" class="position-relative">
        <i class="ci-search position-absolute top-50 translate-middle-y ms-3 text-muted" style="font-size: 16px;"></i>
        <input type="search" name="q"
          class="form-control compact-search rounded-pill ps-4 pe-3"
          placeholder="Search products..."
          aria-label="Search products">
      </form>
    </div>
  </div>
</header>

<!-- ================= NAVIGATION / CATEGORIES ================= -->
<nav class="offcanvas offcanvas-start" id="navbarNav">
  <div class="offcanvas-header py-4">
    <h5 class="h6 mb-0">Browse Categories</h5>
    <button class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close menu"></button>
  </div>

  <div class="offcanvas-body p-0">
    <% if (result && result[0]) { %>
      <div class="list-group list-group-flush">
        <% for (let i = 0; i < result[0].length; i++) { %>
          <a href="/category?id=<%= result[0][i].id %>"
             class="list-group-item list-group-item-action border-0 py-2 d-flex align-items-center">
            <img src="/images/<%= result[0][i].image %>" 
                 class="me-3 rounded" 
                 style="width: 28px; height: 28px; object-fit: cover;"
                 alt="<%= result[0][i].name %>">
            <span class="fw-medium"><%= result[0][i].name %></span>
          </a>
        <% } %>
      </div>
    <% } %>
  </div>
</nav>

<!-- Customizer offcanvas -->
<div class="offcanvas offcanvas-end" id="customizer" tabindex="-1">
  <div class="offcanvas-header border-bottom">
    <h4 class="h5 offcanvas-title">Customize theme</h4>
    <button class="btn-close" type="button" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
    <!-- Customizer settings -->
    <div class="customizer-collapse collapse show" id="customizerSettings">
      <!-- Colors -->
      <div class="pb-4 mb-2">
        <div class="d-flex align-items-center mb-3">
          <i class="ci-paint text-body-tertiary fs-5 me-2"></i>
          <h5 class="fs-lg mb-0">Colors</h5>
        </div>
        <div class="row row-cols-2 g-3" id="theme-colors">
          <div class="col">
            <h6 class="fs-sm mb-2">Primary</h6>
            <div class="color-swatch d-flex border rounded gap-3 p-2" id="theme-primary" data-color-labels="[&quot;theme-primary&quot;, &quot;primary&quot;, &quot;primary-rgb&quot;]">
              <input type="text" class="form-control bg-transparent border-0 rounded-0 p-1" value="#f55266">
              <label for="primary" class="ratio ratio-1x1 flex-shrink-0 w-100 cursor-pointer rounded-circle" style="max-width: 38px; background-color: #f55266"></label>
              <input type="color" class="visually-hidden" id="primary" value="#f55266">
            </div>
          </div>
          <div class="col">
            <h6 class="fs-sm mb-2">Success</h6>
            <div class="color-swatch d-flex border rounded gap-3 p-2" id="theme-success" data-color-labels="[&quot;theme-success&quot;, &quot;success&quot;, &quot;success-rgb&quot;]">
              <input type="text" class="form-control bg-transparent border-0 rounded-0 p-1" value="#33b36b">
              <label for="success" class="ratio ratio-1x1 flex-shrink-0 w-100 cursor-pointer rounded-circle" style="max-width: 38px; background-color: #33b36b"></label>
              <input type="color" class="visually-hidden" id="success" value="#33b36b">
            </div>
          </div>
          <div class="col">
            <h6 class="fs-sm mb-2">Warning</h6>
            <div class="color-swatch d-flex border rounded gap-3 p-2" id="theme-warning" data-color-labels="[&quot;theme-warning&quot;, &quot;warning&quot;, &quot;warning-rgb&quot;]">
              <input type="text" class="form-control bg-transparent border-0 rounded-0 p-1" value="#fc9231">
              <label for="warning" class="ratio ratio-1x1 flex-shrink-0 w-100 cursor-pointer rounded-circle" style="max-width: 38px; background-color: #fc9231"></label>
              <input type="color" class="visually-hidden" id="warning" value="#fc9231">
            </div>
          </div>
          <div class="col">
            <h6 class="fs-sm mb-2">Danger</h6>
            <div class="color-swatch d-flex border rounded gap-2 p-2" id="theme-danger" data-color-labels="[&quot;theme-danger&quot;, &quot;danger&quot;, &quot;danger-rgb&quot;]">
              <input type="text" class="form-control bg-transparent border-0 rounded-0 p-1" value="#f03d3d">
              <label for="danger" class="ratio ratio-1x1 flex-shrink-0 w-100 cursor-pointer rounded-circle" style="max-width: 38px; background-color: #f03d3d"></label>
              <input type="color" class="visually-hidden" id="danger" value="#f03d3d">
            </div>
          </div>
          <div class="col">
            <h6 class="fs-sm mb-2">Info</h6>
            <div class="color-swatch d-flex border rounded gap-2 p-2" id="theme-info" data-color-labels="[&quot;theme-info&quot;, &quot;info&quot;, &quot;info-rgb&quot;]">
              <input type="text" class="form-control bg-transparent border-0 rounded-0 p-1" value="#2f6ed5">
              <label for="info" class="ratio ratio-1x1 flex-shrink-0 w-100 cursor-pointer rounded-circle" style="max-width: 38px; background-color: #2f6ed5"></label>
              <input type="color" class="visually-hidden" id="info" value="#2f6ed5">
            </div>
          </div>
        </div>
      </div>

      <!-- Direction -->
      <div class="pb-4 mb-2">
        <div class="d-flex align-items-center pb-1 mb-2">
          <i class="ci-sort text-body-tertiary fs-lg me-2" style="transform: rotate(90deg)"></i>
          <h5 class="fs-lg mb-0">Direction</h5>
        </div>
        <div class="d-flex align-items-center justify-content-between border rounded p-3">
          <div class="me-3">
            <h6 class="mb-1">RTL</h6>
            <p class="fs-sm mb-0">Change text direction</p>
          </div>
          <div class="form-check form-switch m-0">
            <input type="checkbox" class="form-check-input" role="switch" id="rtl-switch">
          </div>
        </div>
        <div class="alert alert-info p-2 mt-2 mb-0">
          <div class="d-flex text-body-emphasis fs-xs py-1 pe-1">
            <i class="ci-info text-info fs-lg mb-2 mb-sm-0" style="margin-top: .125rem"></i>
            <div class="ps-2">To switch the text direction of your webpage from LTR to RTL, please consult the detailed instructions provided in the relevant section of our documentation.</div>
          </div>
        </div>
      </div>

      <!-- Border width -->
      <div class="pb-4 mb-2">
        <div class="d-flex align-items-center pb-1 mb-2">
          <i class="ci-menu text-body-tertiary fs-lg me-2"></i>
          <h5 class="fs-lg mb-0">Border width, px</h5>
        </div>
        <div class="slider-input d-flex align-items-center gap-3 border rounded p-3" id="border-input">
          <input type="range" class="form-range" min="0" max="10" step="1" value="1">
          <input type="number" class="form-control" id="border-width" min="0" max="10" value="1" style="max-width: 5.5rem">
        </div>
      </div>

      <!-- Rounding -->
      <div class="d-flex align-items-center pb-1 mb-2">
        <i class="ci-maximize text-body-tertiary fs-lg me-2"></i>
        <h5 class="fs-lg mb-0">Rounding, rem</h5>
      </div>
      <div class="slider-input d-flex align-items-center gap-3 border rounded p-3">
        <input type="range" class="form-range" min="0" max="5" step=".05" value="0.5">
        <input type="number" class="form-control" id="border-radius" min="0" max="5" step=".05" value="0.5" style="max-width: 5.5rem">
      </div>
    </div>

    <!-- Customizer code -->
    <div class="customizer-collapse collapse" id="customizerCode">
      <div class="nav mb-3">
        <a class="nav-link animate-underline fs-base p-0" href="/" data-bs-toggle="collapse" aria-expanded="true" aria-controls="customizerSettings customizerCode">
          <i class="ci-chevron-left fs-lg ms-n1 me-1"></i>
          <span class="animate-target">Back to settings</span>
        </a>
      </div>
      <p class="fs-sm pb-1">To apply the provided styles to your webpage, enclose them within a <code>&lt;style&gt;</code> tag and insert this tag into the <code>&lt;head&gt;</code> section of your HTML document after the following link to the main stylesheet:<br><code>&lt;link href="/theme/assets/css/theme.min.css"&gt;</code></p>
      <div class="position-relative bg-body-tertiary rounded overflow-hidden pt-3">
        <div class="position-absolute top-0 start-0 w-100 p-3">
          <button type="button" class="btn btn-sm btn-outline-dark w-100" data-copy-text-from="#generated-styles" data-done-label="Code copied">
            <i class="ci-copy fs-sm me-1"></i>
            Copy code
          </button>
        </div>
        <pre class="text-wrap bg-transparent border-0 fs-xs text-body-emphasis p-4 pt-5" id="generated-styles"></pre>
      </div>
    </div>
  </div>

  <!-- Offcanvas footer (Action buttons) -->
  <div class="offcanvas-header border-top gap-3 d-none" id="customizer-btns">
    <button type="button" class="btn btn-lg btn-secondary w-100 fs-sm" id="customizer-reset">
      <i class="ci-trash fs-lg me-2 ms-n1"></i>
      Reset
    </button>
    <button class="btn btn-lg btn-primary hiding-collapse-toggle w-100 fs-sm collapsed" type="button" data-bs-toggle="collapse" data-bs-target=".customizer-collapse" aria-expanded="false" aria-controls="customizerSettings customizerCode">
      <i class="ci-code fs-lg me-2 ms-n1"></i>
      Show code
    </button>
  </div>
</div>

<!-- Order details offcanvas -->
<div class="offcanvas offcanvas-end pb-sm-2 px-sm-2" id="orderDetails" tabindex="-1" aria-labelledby="orderDetailsLabel" style="width: 500px">
  <!-- Header -->
  <div class="offcanvas-header align-items-start py-3 pt-lg-4">
    <div>
      <h4 class="offcanvas-title mb-1" id="orderDetailsLabel">Order # <span id="order-id"></span></h4>
      <span class="d-flex align-items-center fs-sm fw-medium text-body-emphasis">
        <span class="bg-info rounded-circle p-1 me-2"></span>
        <span id="order-status"></span>
      </span>
    </div>
    <button type="button" class="btn-close mt-0" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>

  <!-- Body -->
  <div class="d-flex flex-column gap-4 pt-2 pb-3" style="flex-grow: 0.2; overflow-y: auto; padding: var(--cz-offcanvas-padding-y) var(--cz-offcanvas-padding-x);">
    <!-- Items -->
    <div id="order-items" class="d-flex flex-column gap-1"></div>

    <div class="d-flex align-items-center" style="margin-bottom: -50px;">
      <div id="order-image"></div>
      <hr/>
      <div class="w-100 min-w-0 ps-2 ps-sm-3">
        <h5 class="d-flex animate-underline mb-2">
          <a class="d-block fs-sm fw-medium text-truncate animate-target" id="order-name"></a>
        </h5>
        <div class="h6 mb-2" id="order-price"></div>
        <div class="fs-xs" id="order-quantity"></div>
      </div>
    </div>
  </div>

  <!-- Delivery + Payment info -->
  <div class="border-top pt-4" style="margin:20px">
    <h6>Delivery</h6>
    <ul class="list-unstyled fs-sm mb-4">
      <li class="d-flex justify-content-between mb-1">
        Estimated delivery date:
        <span class="text-body-emphasis fw-medium text-end ms-2" id="delivery-date"></span>
      </li>
      <li class="d-flex justify-content-between">
        Shipping address:
        <span class="text-body-emphasis fw-medium text-end ms-2" id="shipping-address"></span>
      </li>
    </ul>
    <h6>Payment</h6>
    <ul class="list-unstyled fs-sm m-0">
      <li class="d-flex justify-content-between mb-1">
        Payment method:
        <span class="text-body-emphasis fw-medium text-end ms-2" id="payment-method"></span>
      </li>
      <li class="d-flex justify-content-between">
        Shipping:
        <span class="text-body-emphasis fw-medium text-end ms-2" id="shipping"></span>
      </li>
    </ul>
  </div>

  <!-- Total -->
  <div class="d-flex align-items-center justify-content-between fs-sm border-top pt-4" style="margin: 20px;">
    Estimated total:
    <span class="h5 text-end ms-2 mb-0" id="total-price"></span>
  </div>

  <div id="order-actions" style="position: relative;bottom: 100;" class="mt-3"></div>
</div>

<div class="modal fade" id="replacementModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Request Replacement</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <label class="form-label">Upload Unboxing Video</label>
        <input type="file" id="unboxingVideo" class="form-control" accept="video/*">

        <label class="form-label mt-3">Describe Your Issue</label>
        <textarea id="issueDescription" class="form-control" rows="3"></textarea>
        
        <input type="hidden" id="replacementOrderId">
        <input type="hidden" id="replacementProductId">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-success" id="submitReplacement">Submit</button>
      </div>
    </div>
  </div>
</div>

<div id="loader" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 1050;">
  <div class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>

<div class="modal fade" id="reviewModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Rate & Review</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <label class="form-label">Rating (1-5)</label>
        <select id="rating" class="form-select">
          <option value="1">1 - Poor</option>
          <option value="2">2 - Fair</option>
          <option value="3">3 - Good</option>
          <option value="4">4 - Very Good</option>
          <option value="5">5 - Excellent</option>
        </select>

        <label class="form-label mt-3">Write a Review</label>
        <textarea id="reviewText" class="form-control" rows="3"></textarea>

        <input type="hidden" id="reviewOrderId">
        <input type="hidden" id="reviewProductId">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" id="submitReview">Submit</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="deleteModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Confirm Deletion</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to delete this order?</p>
        <input type="hidden" id="deleteItemId">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No</button>
        <button type="button" class="btn btn-danger" id="confirmDelete">Yes, Delete</button>
      </div>
    </div>
  </div>
</div>

<!-- Bonuses info modal -->
<div class="modal fade" id="bonusesModal" tabindex="-1" aria-labelledby="bonusesModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="bonusesModalLabel">My bonuses</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="row align-items-center">
          <div class="col-sm-6 mb-4 mb-sm-0">
            <div class="position-relative bg-warning text-center rounded-4 overflow-hidden">
              <div class="position-relative z-1 py-3 px-4">
                <svg class="text-white opacity-75 mb-2" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 16 16" fill="currentColor"><path d="M1.333 9.667H7.5V16h-5c-.64 0-1.167-.527-1.167-1.167V9.667zm13.334 0v5.167c0 .64-.527 1.167-1.167 1.167h-5V9.667h6.167zM0 5.833V7.5c0 .64.527 1.167 1.167 1.167h.167H7.5v-1-3H1.167C.527 4.667 0 5.193 0 5.833zm14.833-1.166H8.5v3 1h6.167.167C15.473 8.667 16 8.14 16 7.5V5.833c0-.64-.527-1.167-1.167-1.167z"></path><path d="M8 5.363a.5.5 0 0 1-.495-.573C7.752 3.123 9.054-.03 12.219-.03c1.807.001 2.447.977 2.447 1.813 0 1.486-2.069 3.58-6.667 3.58zM12.219.971c-2.388 0-3.295 2.27-3.595 3.377 1.884-.088 3.072-.565 3.756-.971.949-.563 1.287-1.193 1.287-1.595 0-.599-.747-.811-1.447-.811z"></path><path d="M8.001 5.363c-4.598 0-6.667-2.094-6.667-3.58 0-.836.641-1.812 2.448-1.812 3.165 0 4.467 3.153 4.713 4.819a.5.5 0 0 1-.495.573zM3.782.971c-.7 0-1.448.213-1.448.812 0 .851 1.489 2.403 5.042 2.566C7.076 3.241 6.169.971 3.782.971z"></path></svg>
                <div class="h2 text-white pb-1 mb-2">100</div>
                <p class="fs-sm fw-medium text-white opacity-75 mb-0">1 bonus = 1$</p>
              </div>
              <div class="position-absolute bg-white bg-opacity-10 rounded-circle" style="top: -15px; right: -128px; width: 165px; height: 165px"></div>
              <div class="position-absolute bg-white bg-opacity-10 rounded-circle" style="top: -15px; left: -128px; width: 165px; height: 165px"></div>
            </div>
          </div>
          <div class="col-sm-6">
            <ul class="list-unstyled fs-sm m-0">
              <li class="d-flex align-items-center justify-content-between">
                Available:
                <span class="text-dark-emphasis fw-semibold ms-2">100</span>
              </li>
              <li class="d-flex align-items-center justify-content-between">
                Waiting activation:
                <span class="text-dark-emphasis fw-semibold ms-2">0</span>
              </li>
              <li class="d-flex align-items-center justify-content-between">
                Total:
                <span class="text-dark-emphasis fw-semibold ms-2">100</span>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Page content -->
<main class="content-wrapper">
  <div class="container py-5 mt-n2 mt-sm-0">
    <div class="row pt-md-2 pt-lg-3 pb-sm-2 pb-md-3 pb-lg-4 pb-xl-5">
      <!-- Sidebar navigation that turns into offcanvas on screens < 992px wide (lg breakpoint) -->
      <aside class="col-lg-3">
        <div class="offcanvas-lg offcanvas-start pe-lg-0 pe-xl-4" id="accountSidebar">
          <!-- Header -->
          <div class="offcanvas-header d-lg-block py-3 p-lg-0">
            <div class="d-flex align-items-center">
              <div class="h5 d-flex justify-content-center align-items-center flex-shrink-0 text-primary bg-primary-subtle lh-1 rounded-circle mb-0" style="width: 3rem; height: 3rem"><%= result[2][0].firstname.charAt(0).toUpperCase() %></div>
              <div class="min-w-0 ps-3">
                <h5 class="h6 mb-1"><%=result[2][0].firstname%> <%=result[2][0].lastname%></h5>
              </div>
            </div>
            <button type="button" class="btn-close d-lg-none" data-bs-dismiss="offcanvas" data-bs-target="#accountSidebar" aria-label="Close"></button>
          </div>

          <!-- Body (Navigation) -->
          <div class="offcanvas-body d-block pt-2 pt-lg-4 pb-lg-0">
            <nav class="list-group list-group-borderless">
              <a class="list-group-item list-group-item-action d-flex align-items-center" href="/myorder">
                <i class="ci-shopping-bag fs-base opacity-75 me-2"></i>
                Orders
              </a>
              <a class="list-group-item list-group-item-action d-flex align-items-center" href="/view-wishlist">
                <i class="ci-heart fs-base opacity-75 me-2"></i>
                Wishlist
              </a>
            </nav>
            <h6 class="pt-4 ps-2 ms-1">Manage account</h6>
            <nav class="list-group list-group-borderless">
              <a class="list-group-item list-group-item-action d-flex align-items-center" href="/myaccount">
                <i class="ci-user fs-base opacity-75 me-2"></i>
                Personal info
              </a>
              <a class="list-group-item list-group-item-action d-flex align-items-center" href="/myaddress">
                <i class="ci-map-pin fs-base opacity-75 me-2"></i>
                Addresses
              </a>
              <a class="list-group-item list-group-item-action d-flex align-items-center" href="/logout">
                <i class="ci-log-out fs-base opacity-75 me-2"></i>
                Logout
              </a>
            </nav>
          </div>
        </div>
      </aside>

      <!-- Add new address modal -->
      <div class="modal fade" id="newAddressModal" data-bs-backdrop="static" tabindex="-1" aria-labelledby="newAddressModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="newAddressModalLabel">Add new address</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <form class="row g-3 g-lg-4 needs-validation" novalidate="" method="post" action="/save-myaddress">
                <div class="col-lg-6">
                  <div class="position-relative">
                    <label for="add-fname" class="form-label">First Name</label>
                    <input type="text" name="firstname" class="form-control" id="add-fname" required="">
                    <div class="invalid-feedback">Please enter your First Name!</div>
                  </div>
                </div>
                <div class="col-lg-6">
                  <div class="position-relative">
                    <label for="add-lname" class="form-label">Last Name</label>
                    <input type="text" name="lastname" class="form-control" id="add-lname" required="">
                    <div class="invalid-feedback">Please enter your Last Name!</div>
                  </div>
                </div>
                <div class="col-lg-6">
                  <div class="position-relative">
                    <label class="form-label">City</label>
                    <select name="city" class="form-select" data-select="{&quot;searchEnabled&quot;: true}" aria-label="Select city" required="">
                      <option value="">Select your city</option>
                      <option value="Mumbai">Mumbai</option>
                      <option value="Delhi">Delhi</option>
                      <option value="Bangalore">Bangalore</option>
                      <option value="Hyderabad">Hyderabad</option>
                      <option value="Ahmedabad">Ahmedabad</option>
                      <option value="Chennai">Chennai</option>
                      <option value="Kolkata">Kolkata</option>
                      <option value="Surat">Surat</option>
                      <option value="Pune">Pune</option>
                      <option value="Jaipur">Jaipur</option>
                      <option value="Lucknow">Lucknow</option>
                      <option value="Kanpur">Kanpur</option>
                      <option value="Nagpur">Nagpur</option>
                      <option value="Indore">Indore</option>
                      <option value="Thane">Thane</option>
                      <option value="Bhopal">Bhopal</option>
                      <option value="Visakhapatnam">Visakhapatnam</option>
                      <option value="Patna">Patna</option>
                      <option value="Vadodara">Vadodara</option>
                      <option value="Ghaziabad">Ghaziabad</option>
                      <option value="Ludhiana">Ludhiana</option>
                      <option value="Agra">Agra</option>
                      <option value="Nashik">Nashik</option>
                      <option value="Faridabad">Faridabad</option>
                      <option value="Meerut">Meerut</option>
                      <option value="Rajkot">Rajkot</option>
                      <option value="Kalyan-Dombivli">Kalyan-Dombivli</option>
                      <option value="Vasai-Virar">Vasai-Virar</option>
                      <option value="Varanasi">Varanasi</option>
                      <option value="Srinagar">Srinagar</option>
                      <option value="Aurangabad">Aurangabad</option>
                      <option value="Dhanbad">Dhanbad</option>
                      <option value="Amritsar">Amritsar</option>
                      <option value="Navi Mumbai">Navi Mumbai</option>
                      <option value="Allahabad">Allahabad</option>
                      <option value="Howrah">Howrah</option>
                      <option value="Ranchi">Ranchi</option>
                      <option value="Gwalior">Gwalior</option>
                      <option value="Jabalpur">Jabalpur</option>
                      <option value="Coimbatore">Coimbatore</option>
                      <option value="Vijayawada">Vijayawada</option>
                      <option value="Madurai">Madurai</option>
                    </select>
                    <div class="invalid-feedback">Please select your city!</div>
                  </div>
                </div>
                <div class="col-lg-6">
                  <div class="position-relative">
                    <label for="add-pincode" class="form-label">ZIP code</label>
                    <input type="text" name="pincode" class="form-control" id="add-pincode" required="">
                    <div class="invalid-feedback">Please enter your ZIP code!</div>
                  </div>
                </div>
                <div class="col-lg-12">
                  <div class="position-relative">
                    <label for="add-address" class="form-label">Address</label>
                    <input type="text" name="address" class="form-control" id="add-address" required="">
                    <div class="invalid-feedback">Please enter your address!</div>
                  </div>
                </div>
                <div class="col-12">
                  <div class="d-flex gap-3 pt-2 pt-sm-0">
                    <button type="submit" class="btn btn-primary">Add address</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
</body>
</html>